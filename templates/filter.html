{% extends "base.html" %}
{% block content %}
<body>
    <hr>
    <form action="/filter" method="post" accept-charset="utf-8" name="filterform">
        <div class="form-group">
            <label for="author">Author</label>
            <select class="form-control" name="author" onchange="__doPostBack()">
                {% for author in authors %}
                <option value="{{ author }}" {% if currentauthor|string() ==  author|string() %} selected {% endif %}>
                {{ author }}
                </option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="tag">Tag</label>
            <select class="form-control" name="tag">
                {% for tag in tags %}
                <option value="{{ tag }}" {% if currenttag|string() ==  tag|string() %} selected {% endif %}>
                {{ tag }}
                </option>
                {% endfor %}
            </select>
        </div>
        <input name="btn" type="submit" value="Search" class="btn btn-default" />
        {% if error %}
        <p class="error">Error validating ViewState! Are you a silly robot?</p>
        {% endif %}
        <input type="hidden" name="__VIEWSTATE" value="{{ viewstate }}">
    </form>
    <div class="results">
        {% if quotes %}
        <h3>Results</h3>
        {% endif %}
        {% for quote in quotes %}
        <div class="quote">
            <span>{{ quote }}</span>
        </div>
        <hr />
        {% endfor %}
    </div>
    <script type="text/javascript">
        var theForm = document.forms['filterform'];
            if (!theForm) {
                theForm = document.filterform;
            }   
        function __doPostBack() {
            if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
                theForm.submit();
            }
        }
    </script>
</body>
{% endblock %}
